!function(e){var a={};function r(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,a,i){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)r.d(i,n,function(a){return e[a]}.bind(null,n));return i},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="/assets/",r(r.s=847)}({20:function(e,a,r){"use strict";r.r(a),r.d(a,"sendEmailSubmitConversion",(function(){return i})),r.d(a,"sendAccountCreatedConversion",(function(){return n})),r.d(a,"sendPurchasedSchoolPlanConversion",(function(){return t}));var i=function(){return new Promise((function(e){fbq("trackCustom","Email Submitted"),window.gtag("event","conversion",{send_to:"AW-959285871/L-28CLax0bQBEO-UtskD",event_callback:e})}))},n=function(){return new Promise((function(e){fbq("trackCustom","Account Created"),window.gtag("event","account created",{send_to:"AW-959285871/L-28CLax0bQBEO-UtskD",event_callback:e})}))},t=function(){return new Promise((function(e){fbq("trackCustom","Purchased Plan"),window.gtag("event","purchased plan",{send_to:"AW-959285871/L-28CLax0bQBEOx-UtskD",event_callback:e})}))}},847:function(e,a,r){var i=r(20).sendAccountCreatedConversion;$(document).ready((function(){$(".sign-up-form")[0]&&n.initialize()}));var n={initialize:function(){Common.clickOrEnter({click:"#signup_final",enter:".signup-form-step-2 input",action:n.clickSignUpButton}),$("#modal_name_field").on("keydown",n.clearNameError),$("#modal_email_field").on("keydown",n.clearEmailErrors),$("#modal_password_field").on("keydown",n.clearPasswordErrors),$("#modal_confirm_password_field").on("keydown",n.clearPasswordErrors),$(".terms-of-service-checkbox").on("change",n.clearServiceTermsError),$("#modal_email_field").on("blur",n.checkEmail),$(".sign-up-form .marketing-email-opt-in-container").each((function(e){Common.verifyIfMarketingEmailOptInNeeded(this)}))},checkEmail:function(){var e=$("#modal_email_field")[0].value,a=Common.checkEmailValidation($("#modal_email_field")[0]),r=document.querySelector(".email-validation-update-email-prompt");if(a&&!r){var i=document.createElement("span"),n=document.createElement("a");i.classList.add("email-validation-update-email-container"),i.dataset.originalEmail=e,i.dataset.suggestedEmail=a.suggestedEmail,n.classList.add("email-validation-update-email-prompt"),n.innerText=a.error,n.onclick=function(){$("#modal_email_field")[0].value=a.suggestedEmail,i.remove(),Tracking.irisEmit("suggested_valid_email_used",{original_email:e,corrected_email:a.suggestedEmail})},i.appendChild(n),$("#modal_email_field")[0].insertAdjacentElement("afterend",i),Tracking.irisEmit("suggested_valid_email_shown",{original_email:e,corrected_email:a.suggestedEmail})}},clearNameError:function(){$("#error_username").removeClass("show")},clearEmailErrors:function(){if($("#error_email").removeClass("show"),$("#error_duplicate_email").removeClass("show"),$(".email-validation-update-email-container").length>0){var e=$(".email-validation-update-email-container");Tracking.irisEmit("suggested_valid_email_used",{original_email:e.data("originalEmail"),corrected_email:e.data("suggestedEmail")}),e.remove()}},clearPasswordErrors:function(){$("#error_pw").removeClass("show"),$("#error_confirm").removeClass("show")},clearServiceTermsError:function(){$("#error_terms").removeClass("show")},clickSignUpButton:function(e){e.preventDefault();var a=$("#modal_name_field").val(),r=$("#modal_email_field").val(),i=$("#modal_password_field").val(),t=$("#modal_confirm_password_field").val(),o=a.length>0,l=Common.validateEmail(r),s=i.length>=6,m=i===t,c=$(".terms-of-service-checkbox").is(":checked");o||$("#error_username").addClass("show"),l||$("#error_email").addClass("show"),s?m||$("#error_confirm").addClass("show"):$("#error_pw").addClass("show"),c||$("#error_terms").addClass("show"),o&&l&&s&&m&&c&&($("#signup_final").attr("disabled",!0),$("#right-box-spinner").removeClass("hidden"),Common.localStorageDisabled||localStorage.setItem("email",r),n.sendSignUpData(a,r,i))},sendSignUpData:function(e,a,r){var t=null;Common.localStorageDisabled||(t=localStorage.getItem("referral")),postData={name:e,email:a,password:r,referral:t},Tracking.anonymousId()&&Tracking.isProduction&&(postData._afid=Tracking.anonymousId()),$.ajax({type:"POST",url:"/api/register_account",data:{registration:postData},success:function(e){i(),Tracking.irisEmit("sign_up_email_submitted",{email:a,target:["segment","iterable"],iterable:{event_name:"Sign Up - Email Submitted",instance_id:1,email_submitted_event:!0}}),Iterable.sendEvent({eventName:"Sign Up - Email Submitted",email:a,instanceId:1,isEmailSubmittedEvent:!0,data:{eu:Common.checkIfNeedsMarketingEmailOptIn()}});var r=$.find(".marketing-email-opt-in-input"),n=r[0]&&r[0].checked;(Common.checkIfOptedIntoEmails()||n)&&Common.updateMarketingEmailOptInChoice(!0,a),Tracking.waitForTrackingToSend((function(){var a=e.redirect_url+Common.getParamsToPassToProduct();Tracking.anonymousId()&&Tracking.isProduction&&(a+=Tracking.afidUrlParameter()),window.location.href=a}))},error:function(e){$("#right-box-spinner").addClass("hidden"),$("#signup_final").removeAttr("disabled"),"has already been taken"==(e=JSON.parse(e.responseText)).teachable_account.email[0]?(Tracking.irisEmit("existing_account_error",n.getIrisTrackingData()),$("#error_duplicate_email").addClass("show")):$("#error_server").addClass("show")}})},getIrisTrackingData:function(){var e={};return e.email=$("#modal_email_field").val(),!Common.localStorageDisabled&&localStorage.getItem("referral")&&(e.referral_token=localStorage.getItem("referral")),["upgrade_src","utm_source","utm_medium","utm_campaign","utm_content","mt_campaign_group","mt_tier","mt_interval","i_campaign_id","i_template_id"].forEach((function(a){var r=Common.params[a];r&&(e[a]=r)})),e}}}});
//# sourceMappingURL=sign-up-form-bundle-3d6eb8d45e2f37c43fd6.js.map